<!DOCTYPE html>
<html lang="en">
<head>
    <title>Message Feed</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

</head>
<body>
   <nav>
       <div class="nav-wrapper deep-purple lighten-1">
           <a class="brand-logo center">Mam Messages</a>
       </div>
   </nav>
   <div class="container">
    <ul>

    </ul>
    <div>

    <script>
        const electron = require('electron');
        const {ipcRenderer} = electron;
        const ul = document.querySelector('ul');

        //add item
        ipcRenderer.on('item:add', function(e, item){
            // ul.className = 'collection  cyan lighten-5'
            const nestedUl = document.createElement('ul');
            const messageText = document.createTextNode("Message No: " + item.message);
            const temperatureText = document.createTextNode("Temperature: " + item.temperature);
            const humidityText = document.createTextNode("Humidity: " + item.humidity);
            const timestampText = document.createTextNode("TimeStamp: " + item.timestamp);
            const routeNameText = document.createTextNode("RouteName: " + item.routeName);
            const infoText = document.createTextNode("Additional Information: " + item.information);



            const li = document.createElement('li');
            const li2 = document.createElement('li');
            const li3 = document.createElement('li');
            const li4 = document.createElement('li');
            const li5 = document.createElement('li');
            const li6 = document.createElement('li');

            liArray = [li,li2,li3,li4,li5,li6];

            for (i=0; i < liArray.length; i++){
                liArray[i].className = 'collection-item cyan lighten-5'
            }

            li.appendChild(messageText);
            li2.appendChild(temperatureText);
            li6.appendChild(humidityText);
            li3.appendChild(timestampText);
            li4.appendChild(routeNameText);
            li5.appendChild(infoText);

            ul.appendChild(nestedUl);

            nestedUl.className = 'collection'

            nestedUl.appendChild(li);
            nestedUl.appendChild(li2);
            nestedUl.appendChild(li3);
            nestedUl.appendChild(li4);
            nestedUl.appendChild(li5);
            nestedUl.appendChild(li6);

            



            
        });

        // clear items
        ipcRenderer.on('item:clear', function(){
            ul.innerHTML = "";
            if (ul.children.length === 0){
               ul.className = ''
           }
        });



        // remove items
        ul.addEventListener('dblclick', removeItem);

        function removeItem(e){
           e.target.remove();
           if (ul.children.length == 0){
               ul.className = ''
           }

        }

    
    

    </script>
    
</body>
</html>